---
title: Taskerï¼šGaussianè®¡ç®—ä»»åŠ¡è‡ªåŠ¨åŒ–å·¥å…·é›†
date: 2024-11-20 10:00:00 +0800
categories: [Scripts]
tags: [Tasker]
pin: true   
---

[![Version](https://img.shields.io/badge/version-1.0.1-blue.svg)](https://github.com/yourusername/gaussian-automation)
[![Python](https://img.shields.io/badge/python-3.6+-yellow.svg)](https://www.python.org/)

## ðŸ’¡ç®€ä»‹

Taskeræ˜¯ä¸€å¥—Pythonè„šæœ¬å·¥å…·é›†ï¼Œç”¨äºŽè‡ªåŠ¨åŒ–ç”ŸæˆGaussianè®¡ç®—ä»»åŠ¡ã€‚ç‰¹æ€§ï¼š
- å¤„ç†å¤æ‚çš„ä»»åŠ¡ä¾èµ–ï¼ŒæŒ‰ç…§è¦æ±‚ç”Ÿæˆè¾“å…¥æ–‡ä»¶
- ä»»åŠ¡æ¨¡å—åŒ–ï¼Œé€šè¿‡å»ºç«‹æ¨¡æ¿åº“è½»æ¾è®¾ç½®å¤æ‚çš„è®¡ç®—ä»»åŠ¡
- ç»“åˆcrontabï¼ŒæŒ‰ç…§taskæ–‡ä»¶è‡ªåŠ¨è¿›è¡Œè®¡ç®—
- ç»“åˆä½œä¸šè°ƒåº¦ç³»ç»Ÿï¼Œå®žçŽ°é€šè¿‡è°ƒç”¨Multiwfnæˆ–è¿è¡Œè‡ªå®šä¹‰è„šæœ¬ç­‰æ–¹å¼è¿›è¡Œè‡ªåŠ¨åŽå¤„ç†

Taskerå¥—ä»¶æœ‰é…å¥—å¯è§†åŒ–å·¥å…·Orbital viewerï¼Œæ”¯æŒåœ¨Windowså¹³å°ä¸‹å¯¹è½¨é“è¿›è¡Œä¸€é”®å¯è§†åŒ–ã€‚
## ðŸ”§è¿è¡ŒçŽ¯å¢ƒ
- ç³»ç»Ÿï¼šLinux(è°å®¶é‡åŒ–è®¡ç®—åœ¨Windowsä¸Šåšå•Š)
- ç½‘ç»œéœ€æ±‚ï¼šåœ¨ä»¥CASå·å½¢å¼è¾“å…¥ç»“æž„æ—¶ï¼Œéœ€è¦è¿žæŽ¥ç½‘ç»œè°ƒç”¨PubChemçš„APIæŽ¥å£
- çŽ¯å¢ƒä¾èµ–ï¼š
  - å¼€å‘çŽ¯å¢ƒpython 3.8ï¼Œç†è®ºä¸Šå…¼å®¹python3
  - è‹¥ä»¥smileså­—ç¬¦ä¸²å½¢å¼è¾“å…¥ç»“æž„ï¼Œéœ€è¦rdkitåº“
  - è‹¥ä»¥CASå·å½¢å¼è¾“å…¥ç»“æž„ï¼Œéœ€è¦rdkitå’Œrequestsåº“
- çŽ¯å¢ƒå˜é‡ï¼š
  ```bash
  export AUTOTASKER_CALC_PATH="/path/to/calc_folder"
  ```

## ðŸš€å¿«é€Ÿå¼€å§‹

è¦è®¾ç½®ä¸€é¡¹è®¡ç®—ï¼Œæ‚¨å¯ä»¥åœ¨``AUTOTASKER_CALC_PATH``å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹å°±æ˜¯å­˜æ”¾æ‚¨è®¡ç®—ä»»åŠ¡ç›¸å…³æ‰€æœ‰æ–‡ä»¶çš„è·¯å¾„ã€‚æ‚¨éœ€è¦é€‰æ‹©ä¸€ç§æ–¹å¼ç»™å‡ºåˆ†å­ç»“æž„ï¼Œtaskerç›®å‰æ”¯æŒï¼š

 - com/gjf/xyzæ–‡ä»¶ï¼šGaussianæ ‡å‡†è¾“å…¥æ ¼å¼ï¼Œå¯ä»¥æ²¡æœ‰å…³é”®è¯ç­‰ä¿¡æ¯ï¼Œä½†è¦æœ‰æ­£ç¡®çš„å‡ ä½•åæ ‡ã€ç”µè·å’Œè‡ªæ—‹å¤šé‡åº¦ã€‚æŽ¨èä½¿ç”¨comæ–‡ä»¶ï¼Œå› ä¸ºgjfæ˜¯é…å¥—``slurms.sh``è„šæœ¬è¯†åˆ«çš„åŽç¼€ï¼Œä¼šè¢«è‡ªåŠ¨æäº¤ã€‚
 - smileså­—ç¬¦ä¸²/CASå·ï¼šåœ¨taskæ–‡ä»¶ä¸­ä»¥"%smiles="çš„å½¢å¼ç»™å‡ºï¼Œæ­¤æ—¶comæ–‡ä»¶å†…å¯ä»¥ä¸æä¾›å‡ ä½•åæ ‡ã€‚

``name.task``æ–‡ä»¶æ˜¯ç®¡ç†è®¡ç®—ä»»åŠ¡çš„æ–‡ä»¶ï¼Œæ–‡ä»¶ååº”ä¸Žæ‚¨çš„comæ–‡ä»¶ç›¸åŒã€‚æ‚¨å¯ä»¥å‚ç…§ä¸‹ä¸€èŠ‚çš„è¯´æ˜Žæ‰‹åŠ¨è®¾ç½®è¯¥æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨æ¨¡æ¿åº“ä¸­çš„æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œåœ¨taskerç›®å½•ä¸‹çš„templatesæ–‡ä»¶å¤¹ä¸­å¯»æ‰¾fluor.txtï¼Œå¹¶ä½¿ç”¨è¯¥è®¡ç®—æ¨¡æ¿ï¼š
```
@txt=fluor
```

è®¾ç½®å®Œæ¯•åŽï¼Œè¿è¡Œtask_module.pyï¼Œç¨‹åºä¼šè¯†åˆ«AUTOTASKER_CALC_PATHçš„å­ç›®å½•ä¸‹æ–‡ä»¶åç›¸åŒçš„ä¸€å¯¹(task,com/gjf)æ–‡ä»¶ï¼ŒæŒ‰ç…§taskæ–‡ä»¶ä¸­çš„è®¾å®šæ¥ç”Ÿæˆgjfæ–‡ä»¶ã€‚æŽ¨èç»“åˆä½œä¸šè°ƒåº¦ç³»ç»Ÿå’Œcrontabä½¿ç”¨ï¼Œä»¥è¾¾åˆ°å…¨è‡ªåŠ¨ç”Ÿæˆã€æäº¤è®¡ç®—ä»»åŠ¡çš„ç›®çš„ã€‚

## âš™ï¸ä»»åŠ¡æ–‡ä»¶è¯­æ³•

### ä»»åŠ¡å(`$`)

ä»»åŠ¡æ–‡ä»¶ç”±ä»»åŠ¡å—è®¸å¤šä»»åŠ¡å—æž„æˆï¼Œæ¯ä¸ªä»»åŠ¡å—éƒ½ç”±`$`èµ·å§‹ï¼Œè¿™ä¹Ÿæ˜¯è„šæœ¬è¯†åˆ«ä»»åŠ¡å—çš„ä¾æ®ã€‚è„šæœ¬ç”Ÿæˆgjfæ–‡ä»¶æ—¶ï¼Œä¼šå°†ä»»åŠ¡åä½œä¸ºå‰ç¼€é™„åŠ åˆ°åŽŸå§‹com/gjf/xyzæ–‡ä»¶åå‰ä½œä¸ºæ–°çš„gjfæ–‡ä»¶åã€‚ä»¥ä¸‹æ˜¯ä»»åŠ¡å—ç»“æž„ç¤ºä¾‹ï¼š
```
$task_name            # ä»»åŠ¡å
%source               # ç»“æž„æ¥æº
! commands            # å‘½ä»¤æŒ‡ä»¤
# gaussian_keywords   # è®¡ç®—å…³é”®è¯
add = density.wfn     # è¯»å–é¢å¤–è¾“å…¥
```

### ç»“æž„æ¥æº (`%`)
æ”¯æŒä»¥ä¸‹å‡ ç§æ–¹å¼æä¾›å‡ ä½•ç»“æž„ï¼š
```
%origin             # ä½¿ç”¨åˆå§‹com/gjfä¸­çš„ç»“æž„
%smiles=CCO         # ä½¿ç”¨SMILESç”Ÿæˆ
%smiles=50-00-0     # ä½¿ç”¨CASå·ç”Ÿæˆ
%task_name          # ä½¿ç”¨å…¶ä»–ä»»åŠ¡çš„è®¡ç®—ç»“æžœ
%restart            # é‡æ–°æäº¤è¯¥ä»»åŠ¡(æ³¨æ„ï¼è¿™ä¼šè¦†ç›–å½“å‰ä»»åŠ¡ã€‚)
```

%task_nameæ˜¯æœ€é¢‘ç¹ä½¿ç”¨çš„ç»“æž„æ¥æºï¼Œè¿™ä¼šè¯·æ±‚taskerä»Žä»»åŠ¡åä¸ºtask_nameçš„ä»»åŠ¡æ­£å¸¸ç»“æŸçš„è¾“å‡ºæ–‡ä»¶ä¸­æå–æœ€åŽä¸€å¸§çš„ç»“æž„ã€‚ä¾‹å¦‚ï¼š
```
$opt
%origin
# opt freq b3lyp/6-31g*

$td
%opt
# td(nstate=10) wb97xd/def2tzvp
```
åœ¨ç¬¬äºŒä¸ªä»»åŠ¡å—ä¸­ï¼Œ%optè¯·æ±‚ä»Žç¬¬ä¸€ä¸ªä»»åŠ¡æ­£å¸¸ç»“æŸçš„logæ–‡ä»¶ä¸­æå–å‡ ä½•åæ ‡ï¼Œå¹¶ä½œä¸ºè¯¥ä»»åŠ¡çš„èµ·å§‹åæ ‡ä½¿ç”¨ã€‚

- è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨xyzä½œä¸ºoriginç»“æž„æ¥æºæ—¶ï¼Œxyzæ–‡ä»¶çš„ç¬¬äºŒè¡Œåº”å½“å¦‚Gaussianè¾“å…¥æ–‡ä»¶èˆ¬å†™å…¥è‡ªæ—‹å¤šé‡åº¦å’Œç”µè·å€¼ã€‚

### å‘½ä»¤è¯ (`!`)
å‘½ä»¤è¯ç”±commands_words.pyè§£æžï¼Œå¹¶å°†bashå‘½ä»¤å†™å…¥åä¸ºcomdçš„æ–‡ä»¶å†…ã€‚slurms.shæäº¤ä»»åŠ¡æ—¶ä¼šè¯†åˆ«è¯¥comdæ–‡ä»¶ï¼Œå°†å…¶ä¸­å†…å®¹å¤åˆ¶åˆ°slurmè„šæœ¬ä¸­ï¼Œä»¥å®žçŽ°è‡ªåŠ¨åŒ–åŽå¤„ç†ã€‚ç›®å‰æ”¯æŒä»¥ä¸‹å‘½ä»¤ç±»åž‹ï¼š

#### scriptså‘½ä»¤

```
scripts=(fchk,esp)
```

è¯¥å‘½ä»¤è¯ä¼šè¯·æ±‚æ‰“å°ä¸€æ¡å¯ä»¥æ‰§è¡Œtasks/scriptsç›®å½•ä¸‹åŒåbashè„šæœ¬çš„bashå‘½ä»¤ã€‚æ”¯æŒå¤šä¸ªè„šæœ¬æŒ‰é¡ºåºæ‰§è¡Œã€‚

#### multiwfnå‘½ä»¤

```bash
multiwfn=(output.fchk>hole,output.log>uvvis)
```

è¯¥å‘½ä»¤è¯ä¼šè¯·æ±‚ä¸€æ¡ä»¥tasks/wfntxtsä¸‹çš„txtæ¨¡æ¿è¿è¡Œmultiwfnè¿›è¡ŒåŽå¤„ç†çš„bashå‘½ä»¤ï¼Œè¯¥ä¼šåŒæ—¶sourceç›®å½•ä¸‹multiwfnçš„çŽ¯å¢ƒå˜é‡æ–‡ä»¶env.shã€‚
- æ”¯æŒé€šé…ç¬¦ã€‚
- multiwfnçš„è¾“å‡ºå°†è¢«é‡å®šå‘åˆ°`mw_{template}_out.txt`ã€‚

#### copyå‘½ä»¤

```
copy=(*.log>../logs/,*.fchk>../analysis/)
```

è¯¥å‘½ä»¤è¯ä¼šè¯·æ±‚ä¸€æ¡å°†å¯¹åº”æ–‡ä»¶å¤åˆ¶åˆ°æŒ‡å®šç›®å½•çš„bashå‘½ä»¤ï¼Œå¯ä»¥ç»“åˆOrbital_Viewerå¯¹cubæ–‡ä»¶è¿›è¡Œå¿«é€Ÿå¯è§†åŒ–ã€‚
- æ”¯æŒé€šé…ç¬¦
- è‡ªåŠ¨åˆ›å»ºç›®æ ‡ç›®å½•
  
### ORCAè¾“å…¥æ–‡ä»¶
è™½ç„¶Taskerä¸»è¦ç”¨äºŽGaussianè®¡ç®—ï¼Œä½†ä¹Ÿå¯ä»¥åŸºäºŽGaussianç»“æž„ä¼˜åŒ–ç»“æžœï¼Œç»“åˆæ¨¡æ¿æ¥äº§ç”ŸORCAè¾“å…¥æ–‡ä»¶ã€‚è¦è¯·æ±‚äº§ç”ŸORCAè¾“å…¥æ–‡ä»¶ï¼Œæ‚¨åº”å½“åœ¨$ä¸‹æ–¹åŠ ä¸Š`-orca-`æ ‡è¯†ï¼Œä¾‹å¦‚ï¼š
```
$task_name
-orca-
%source
# job=soc func=B3LYP basis=def2-SVP
```
ç”±äºŽorcaè¾“å…¥æ–‡ä»¶éžå¸¸å¤æ‚ï¼Œä¸ºäº†ä¿æŒä»»åŠ¡å—å°ºå¯¸ä¸€è‡´æ€§å’Œç®€æ´æ€§ï¼Œè¿™é‡Œé‡‡ç”¨äº†è‡ªå®šä¹‰æ¨¡æ¿çš„æ–¹å¼ç®¡ç†orcaè¾“å…¥ã€‚è¾“å…¥æ¨¡æ¿åº”è¯¥æ”¾åœ¨tasks/ORCAç›®å½•ä¸‹ï¼Œæ ¼å¼åƒè¿™æ ·ï¼š
~~~
! [func] [basis] tightSCF RIJCOSX

%pal
  nprocs [nproc]
end

%maxcore [mem]

%tddft
  nroots 5
  dosoc true
  printlevel 3
end

* xyzfile [charge] [spin] [xyz_file]

-default-
func=wb97x-d3
basis=def2-svp
nproc=32
mem=3000
~~~
  å…¶ä¸­ï¼Œ[]å ä½ç¬¦çš„å€¼é»˜è®¤ç”±æœ«å°¾-default-å­—æ®µæŽ§åˆ¶ï¼Œä½†ä¹Ÿå¯ä»¥ç”±`#`è¡Œè¿›è¡ŒæŒ‡å®šã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ¨¡æ¿æ–‡ä»¶ä¸­æœ‰[func]å ä½ç¬¦ï¼Œæ ¹æ®-default-å­—æ®µä¸­func=wb97x-d3ï¼Œåœ¨äº§ç”Ÿè¾“å…¥æ–‡ä»¶æ—¶è¯¥å ä½ç¬¦çš„å€¼ä¼šè¢«è®¾ç½®ä¸ºwb97x-d3ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡å—ä¸­ä½¿ç”¨func=B3LYPæ¥è¦†ç›–é»˜è®¤è®¾ç½®ã€‚
- è¯·æ³¨æ„ï¼Œç›®å‰æš‚æ—¶ä¸æ”¯æŒä»¥ORCAè¾“å‡ºç»“æž„è¿›è¡ŒåŽç»­è®¡ç®—ï¼Œslurmsåœ¨å½“å‰ç‰ˆæœ¬ä¹Ÿä¸èƒ½æäº¤orcaä»»åŠ¡

## ðŸ‘‡ä¸‹è½½åœ°å€

[Githubé¡¹ç›®åœ°å€](https://github.com/bane-dysta/TaskModule/tree/main?tab=readme-ov-file)

~~~bash
git clone git@github.com:bane-dysta/TaskModule.git
~~~


## ðŸ”°å¼€å‘è®¡åˆ’

- [x] æ”¯æŒç”ŸæˆORCAè¾“å…¥æ–‡ä»¶
- [ ] æ”¯æŒä»¥æŒ‡å®šç›®å½•æ–‡ä»¶ä¸ºç»“æž„èµ„æº
- [ ] æ”¯æŒGaussiançš„logæ–‡ä»¶ä¸ºç»“æž„èµ„æº
- [x] æ”¯æŒxyzæ ¼å¼æ–‡ä»¶ä¸ºç»“æž„èµ„æº
- [ ] æ”¯æŒåˆ¤æ–­éœ‡è¡æƒ…å†µ
- [ ] ä¸Žmailæ¨¡å—ç»“åˆå®žæ—¶ç›‘æŽ§ä»»åŠ¡çŠ¶å†µ

## ðŸ“‹ æ›´æ–°æ—¥å¿—

### v1.0.1 (2024-12-14)
- æ”¯æŒORCAè¾“å…¥æ–‡ä»¶äº§ç”Ÿ
- ä¿®å¤å·²çŸ¥bug
- ä¹Ÿè®¸Claudeé¡ºæ‰‹ä¿®å¤äº†ä¸€äº›æœªçŸ¥bug
  
### v1.0.0 (2024-11-20)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ

## ðŸ™è‡´è°¢

- [Multiwfn](http://sobereva.com/multiwfn) - å¼ºå¤§çš„æ³¢å‡½æ•°åˆ†æžå·¥å…·
- [RDKit](https://www.rdkit.org/) - åˆ†å­æ“ä½œå·¥å…·åº“
- [PubChem](https://pubchem.ncbi.nlm.nih.gov/) - åŒ–å­¦æ•°æ®åº“
- [Claude](https://claude.ai/) - æä¾›ä»£ç æ”¯æŒ

> Author: Bane Dysta  
> Email: banerxmd@gmail.com   
> Website: https://bane-dysta.github.io/